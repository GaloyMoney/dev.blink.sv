---
id: api-stablesats
title: Send and receive Stablesats
slug: /api/stablesats
---

import { AuthProvider } from '/src/components/apiTutorial/AuthContext';
import { SetApiEndpoint } from '/src/components/apiTutorial/SetApiEndpoint';
import { SetAuthToken } from '/src/components/apiTutorial/SetAuthToken';
import { GetWalletDataUsd } from '/src/components/apiTutorial/GetWalletDataUsd';
import { LnUsdInvoiceCreate } from '/src/components/apiTutorial/LnUsdInvoiceCreate';
import { LnUsdInvoiceFeeProbe } from '/src/components/apiTutorial/LnUsdInvoiceFeeProbe';
import { LnInvoicePaymentSend } from '/src/components/apiTutorial/LnInvoicePaymentSend';

<AuthProvider>

  <SetApiEndpoint />

  <SetAuthToken />

### Get the wallet IDs and check the balances

Can run this query at any stage to confirm the change in the balances.<br />
The "BTC" wallet balance is denominated in satoshis.<br />
The "USD" wallet balance is in cents.

**The body of the GraphQL request**

```graphql
  query Me {
    me {
      defaultAccount {
        wallets {
          id
          walletCurrency
          balance
        }
      }
    }
  }
```

  <GetWalletDataUsd />

### Generate a Stablesats invoice

Using Stablesats a merchant can generate invoices denominated in USD cents. <br />
The satoshi amount of the invoice will reflect the current USD/BTC exchange rate and the balance will be kept at the dollar value.

**The body of the GraphQL request**

```graphql
mutation lnUsdInvoiceCreate($input: LnUsdInvoiceCreateInput!) {
  lnUsdInvoiceCreate(input: $input) {
    invoice {
      paymentRequest
      paymentHash
      paymentSecret
      satoshis
    }
    errors {
      message
    }
  }
}
```

  <LnUsdInvoiceCreate />

### Estimate the payment fee (probe)

Estimate the cost of paying a lightning invoice. <br />
Payments to an other Blink user and to nodes with a direct channel are free.

**The body of the GraphQL request**

```graphql
mutation lnUsdInvoiceFeeProbe($input: LnUsdInvoiceFeeProbeInput!) {
  lnUsdInvoiceFeeProbe(input: $input) {
    errors {
      message
    }
    amount
  }
}
```

  <LnUsdInvoiceFeeProbe />

### Pay a lightning invoice

Pay a BOLT11 invoice from your USD balance.

**The body of the GraphQL request**

```graphql
mutation LnInvoicePaymentSend($input: LnInvoicePaymentInput!) {
  lnInvoicePaymentSend(input: $input) {
    status
    errors {
      message
      path
      code
    }
  }
}
```

  <LnInvoicePaymentSend />

</AuthProvider>
